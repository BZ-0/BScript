// @ts-nocheck
"use strict"

//
import { _LOG_ } from "../Library/Symbols.mjs"
import MessageHandler from "../Protocol/MessageHandler.mjs"
import ResponseReceiver from "../Response/Receiver.mjs"
import ResponseTransmitter from "../Response/Transmitter.mjs"

//
import STD from "../Library/Standard.mjs"
import MessageCoderNetwork from "../MessageCoder/MessageCoderNetwork.mjs"
import BaseHandler, { WrapHandle } from "./BaseHandler.mjs"
import { wrapFunc } from "../Reflection/DirectReflection.mjs"

/**
 *
 */
export default class SocketHandler extends BaseHandler {
    $socket = null

    /**
     * Make object are access into object or class
     * @param {Worker} $socket WebWorker object
     * @param {Object} $options options of worker handler
     * @return {WorkerHandler} Worker handler and wrapper
     */
    constructor($socket, $options = {}) {
        super($socket, $options)

        //
        this.$outbox = new MessageCoderNetwork({
            $detector: this.$detector,
            $dictionary: this.$dictionary,
            $requestReflect: this.$requestReflect,
            $indirectReflect: this.$indirectReflect,
            $promiseReflect: this.$promiseReflect,
            $encode: $options.encode,
            $decode: $options.decode,
            $handler: this
        })

        //
        this.$inbox = new MessageCoderNetwork({
            $detector: this.$detector,
            $dictionary: this.$dictionary,
            $requestReflect: this.$requestReflect,
            $indirectReflect: this.$indirectReflect,
            $promiseReflect: this.$promiseReflect,
            $encode: $options.encode,
            $decode: $options.decode,
            $handler: this
        })

        //
        this.$messageHandler = new MessageHandler(this.$responseReceivers, this.$responseTransmitters, this.$outbox, this.$dictionary, this)
        this.$socket = $socket

        //
        this.$inbox.$messageHandler = this.$messageHandler
        this.$outbox.$messageHandler = this.$messageHandler

        //
        this.$dictionary._requestReflect = this.$requestReflect
        this.$dictionary._indirectReflect = this.$indirectReflect

        //
        this.$socket?.on?.("message", async (e) => {
            //console.log(e.data);
            const $rw = await this.$inbox.decodeMessage([e], [])
            const $dc = $rw[0]
            //console.log(dc);
            if ($dc[0].$type == "request") {
                this.$responseTransmitters.set($dc[0].$id, new ResponseTransmitter($dc[0].$id, this))
            }
            this.$messageHandler.handleRequest(...$rw)
        })
    }

    //
    get ["&code"]() {
        return {
            "&typeof": "socket"
        }
    }

    //
    get socket() {
        return this.$socket
    }

    //
    $request({ $type = "request", $socket = null, $cmd, $args, $persistent }) {
        const $coder = {
            message: this.$outbox,
            request: this.$outbox,
            response: this.$inbox
        }[$type]

        //
        const $buffer = new (typeof SharedArrayBuffer != "undefined" ? SharedArrayBuffer : ArrayBuffer)(4096 + 8, { maxByteLength: 65536 + 8 })
        const $tf = [],
            $id = this.$newUUID(),
            $rec = new ResponseReceiver($id, $buffer)

        //
        this.$responseReceivers.set($id, $rec)
        $coder
            .encodeMessage([{ $id, $type, $socket, $persistent, $cmd, $args }, $buffer, false], $tf)
            .then((_args_) => {
                this.$socket?.emit?.("message", _args_[0][0])
            })
            .catch(console.error.bind(console))

        //
        return new Proxy(
            wrapFunc({
                ["&buffer"]: $buffer,
                ["&data"]: $rec["&data"],
                ["&code"]: {
                    ["&typeof"]: "promise"
                }
            }),
            this.$promiseReflect
        )
    }

    //
    $reject(...$args) {
        //console.error(...$args);
        this.$socket?.emit?.("message", $args[0][0])
    }

    //
    $resolve(...$args) {
        this.$socket?.emit?.("message", $args[0][0])
    }
}

// ES6-modules alike (in v2.3 planned to complete quest)
export const WrapSocket = ($W, $options) => {
    return new Proxy(new SocketHandler($W, $options), new WrapHandle(true))
}

// learn sockets for STD
STD.WrapSocket = WrapSocket
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfTE9HXyIsIk1lc3NhZ2VIYW5kbGVyIiwiUmVzcG9uc2VSZWNlaXZlciIsIlJlc3BvbnNlVHJhbnNtaXR0ZXIiLCJTVEQiLCJNZXNzYWdlQ29kZXJOZXR3b3JrIiwiQmFzZUhhbmRsZXIiLCJXcmFwSGFuZGxlIiwid3JhcEZ1bmMiLCJTb2NrZXRIYW5kbGVyIiwiJHNvY2tldCIsImNvbnN0cnVjdG9yIiwiJG9wdGlvbnMiLCIkb3V0Ym94IiwiJGRldGVjdG9yIiwiJGRpY3Rpb25hcnkiLCIkcmVxdWVzdFJlZmxlY3QiLCIkaW5kaXJlY3RSZWZsZWN0IiwiJHByb21pc2VSZWZsZWN0IiwiJGVuY29kZSIsImVuY29kZSIsIiRkZWNvZGUiLCJkZWNvZGUiLCIkaGFuZGxlciIsIiRpbmJveCIsIiRtZXNzYWdlSGFuZGxlciIsIiRyZXNwb25zZVJlY2VpdmVycyIsIiRyZXNwb25zZVRyYW5zbWl0dGVycyIsIl9yZXF1ZXN0UmVmbGVjdCIsIl9pbmRpcmVjdFJlZmxlY3QiLCJvbiIsImUiLCIkcnciLCJkZWNvZGVNZXNzYWdlIiwiJGRjIiwiJHR5cGUiLCJzZXQiLCIkaWQiLCJoYW5kbGVSZXF1ZXN0IiwiJmNvZGUiLCJzb2NrZXQiLCIkcmVxdWVzdCIsIiRjbWQiLCIkYXJncyIsIiRwZXJzaXN0ZW50IiwiJGNvZGVyIiwiJGJ1ZmZlciIsIlNoYXJlZEFycmF5QnVmZmVyIiwiQXJyYXlCdWZmZXIiLCJtYXhCeXRlTGVuZ3RoIiwiJHRmIiwiJG5ld1VVSUQiLCIkcmVjIiwiZW5jb2RlTWVzc2FnZSIsInRoZW4iLCJfYXJnc18iLCJlbWl0IiwiY2F0Y2giLCJjb25zb2xlIiwiZXJyb3IiLCJiaW5kIiwiUHJveHkiLCIkcmVqZWN0IiwiJHJlc29sdmUiLCJXcmFwU29ja2V0IiwiJFciXSwic291cmNlcyI6WyJDOlxcUHJvamVjdHNcXEJaMFxcQkNvbTJcXHNyY1xcY2l2ZXRcXEhhbmRsZXJzXFxTb2NrZXRIYW5kbGVyLmNpdmV0Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIEB0cy1ub2NoZWNrXG5cInVzZSBzdHJpY3RcIjtcblxuLy9cbmltcG9ydCB7IF9MT0dfIH0gZnJvbSBcIi4uL0xpYnJhcnkvU3ltYm9sc1wiO1xuaW1wb3J0IE1lc3NhZ2VIYW5kbGVyIGZyb20gXCIuLi9Qcm90b2NvbC9NZXNzYWdlSGFuZGxlclwiO1xuaW1wb3J0IFJlc3BvbnNlUmVjZWl2ZXIgZnJvbSBcIi4uL1Jlc3BvbnNlL1JlY2VpdmVyXCI7XG5pbXBvcnQgUmVzcG9uc2VUcmFuc21pdHRlciBmcm9tIFwiLi4vUmVzcG9uc2UvVHJhbnNtaXR0ZXJcIjtcblxuLy9cbmltcG9ydCBTVEQgZnJvbSBcIi4uL0xpYnJhcnkvU3RhbmRhcmRcIjtcbmltcG9ydCBNZXNzYWdlQ29kZXJOZXR3b3JrIGZyb20gXCIuLi9NZXNzYWdlQ29kZXIvTWVzc2FnZUNvZGVyTmV0d29ya1wiO1xuaW1wb3J0IEJhc2VIYW5kbGVyLCB7V3JhcEhhbmRsZX0gZnJvbSBcIi4vQmFzZUhhbmRsZXJcIjtcbmltcG9ydCB7IHdyYXBGdW5jIH0gZnJvbSBcIi4uL1JlZmxlY3Rpb24vRGlyZWN0UmVmbGVjdGlvblwiO1xuXG4vKipcbiAqIFxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTb2NrZXRIYW5kbGVyIGV4dGVuZHMgQmFzZUhhbmRsZXIge1xuICAgICRzb2NrZXQgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogTWFrZSBvYmplY3QgYXJlIGFjY2VzcyBpbnRvIG9iamVjdCBvciBjbGFzc1xuICAgICAqIEBwYXJhbSB7V29ya2VyfSAkc29ja2V0IFdlYldvcmtlciBvYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gJG9wdGlvbnMgb3B0aW9ucyBvZiB3b3JrZXIgaGFuZGxlclxuICAgICAqIEByZXR1cm4ge1dvcmtlckhhbmRsZXJ9IFdvcmtlciBoYW5kbGVyIGFuZCB3cmFwcGVyXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoJHNvY2tldCwgJG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBzdXBlcigkc29ja2V0LCAkb3B0aW9ucyk7XG5cbiAgICAgICAgLy9cbiAgICAgICAgdGhpcy4kb3V0Ym94ID0gbmV3IE1lc3NhZ2VDb2Rlck5ldHdvcmsoe1xuICAgICAgICAgICAgJGRldGVjdG9yOiB0aGlzLiRkZXRlY3RvciwgXG4gICAgICAgICAgICAkZGljdGlvbmFyeTogdGhpcy4kZGljdGlvbmFyeSwgXG4gICAgICAgICAgICAkcmVxdWVzdFJlZmxlY3Q6IHRoaXMuJHJlcXVlc3RSZWZsZWN0LCBcbiAgICAgICAgICAgICRpbmRpcmVjdFJlZmxlY3Q6IHRoaXMuJGluZGlyZWN0UmVmbGVjdCwgXG4gICAgICAgICAgICAkcHJvbWlzZVJlZmxlY3Q6IHRoaXMuJHByb21pc2VSZWZsZWN0LFxuICAgICAgICAgICAgJGVuY29kZTogJG9wdGlvbnMuZW5jb2RlLFxuICAgICAgICAgICAgJGRlY29kZTogJG9wdGlvbnMuZGVjb2RlLFxuICAgICAgICAgICAgJGhhbmRsZXI6IHRoaXNcbiAgICAgICAgfSlcblxuICAgICAgICAvL1xuICAgICAgICB0aGlzLiRpbmJveCA9IG5ldyBNZXNzYWdlQ29kZXJOZXR3b3JrKHtcbiAgICAgICAgICAgICRkZXRlY3RvcjogdGhpcy4kZGV0ZWN0b3IsIFxuICAgICAgICAgICAgJGRpY3Rpb25hcnk6IHRoaXMuJGRpY3Rpb25hcnksIFxuICAgICAgICAgICAgJHJlcXVlc3RSZWZsZWN0OiB0aGlzLiRyZXF1ZXN0UmVmbGVjdCwgXG4gICAgICAgICAgICAkaW5kaXJlY3RSZWZsZWN0OiB0aGlzLiRpbmRpcmVjdFJlZmxlY3QsIFxuICAgICAgICAgICAgJHByb21pc2VSZWZsZWN0OiB0aGlzLiRwcm9taXNlUmVmbGVjdCxcbiAgICAgICAgICAgICRlbmNvZGU6ICRvcHRpb25zLmVuY29kZSxcbiAgICAgICAgICAgICRkZWNvZGU6ICRvcHRpb25zLmRlY29kZSxcbiAgICAgICAgICAgICRoYW5kbGVyOiB0aGlzXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vXG4gICAgICAgIHRoaXMuJG1lc3NhZ2VIYW5kbGVyID0gbmV3IE1lc3NhZ2VIYW5kbGVyKHRoaXMuJHJlc3BvbnNlUmVjZWl2ZXJzLCB0aGlzLiRyZXNwb25zZVRyYW5zbWl0dGVycywgdGhpcy4kb3V0Ym94LCB0aGlzLiRkaWN0aW9uYXJ5LCB0aGlzKTtcbiAgICAgICAgdGhpcy4kc29ja2V0ID0gJHNvY2tldDtcblxuICAgICAgICAvL1xuICAgICAgICB0aGlzLiRpbmJveC4kbWVzc2FnZUhhbmRsZXIgPSB0aGlzLiRtZXNzYWdlSGFuZGxlcjtcbiAgICAgICAgdGhpcy4kb3V0Ym94LiRtZXNzYWdlSGFuZGxlciA9IHRoaXMuJG1lc3NhZ2VIYW5kbGVyO1xuXG4gICAgICAgIC8vXG4gICAgICAgIHRoaXMuJGRpY3Rpb25hcnkuX3JlcXVlc3RSZWZsZWN0ID0gdGhpcy4kcmVxdWVzdFJlZmxlY3Q7XG4gICAgICAgIHRoaXMuJGRpY3Rpb25hcnkuX2luZGlyZWN0UmVmbGVjdCA9IHRoaXMuJGluZGlyZWN0UmVmbGVjdDtcblxuICAgICAgICAvL1xuICAgICAgICB0aGlzLiRzb2NrZXQ/Lm9uPy4oXCJtZXNzYWdlXCIsIGFzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKGUuZGF0YSk7XG4gICAgICAgICAgICBjb25zdCAkcncgPSBhd2FpdCB0aGlzLiRpbmJveC5kZWNvZGVNZXNzYWdlKFtlXSwgW10pO1xuICAgICAgICAgICAgY29uc3QgJGRjID0gJHJ3WzBdO1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhkYyk7XG4gICAgICAgICAgICBpZiAoJGRjWzBdLiR0eXBlID09IFwicmVxdWVzdFwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kcmVzcG9uc2VUcmFuc21pdHRlcnMuc2V0KCRkY1swXS4kaWQsIG5ldyBSZXNwb25zZVRyYW5zbWl0dGVyKCRkY1swXS4kaWQsIHRoaXMpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLiRtZXNzYWdlSGFuZGxlci5oYW5kbGVSZXF1ZXN0KC4uLiRydyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vXG4gICAgZ2V0IFtcIiZjb2RlXCJdKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCImdHlwZW9mXCI6IFwic29ja2V0XCJcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vXG4gICAgZ2V0IHNvY2tldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHNvY2tldDtcbiAgICB9XG5cbiAgICAvL1xuICAgICRyZXF1ZXN0KHskdHlwZSA9IFwicmVxdWVzdFwiLCAgJHNvY2tldCA9IG51bGwsICRjbWQsICRhcmdzLCAkcGVyc2lzdGVudH0pIHtcbiAgICAgICAgY29uc3QgJGNvZGVyID0gKHtcbiAgICAgICAgICAgIFwibWVzc2FnZVwiOiB0aGlzLiRvdXRib3gsIFxuICAgICAgICAgICAgXCJyZXF1ZXN0XCI6IHRoaXMuJG91dGJveCwgXG4gICAgICAgICAgICBcInJlc3BvbnNlXCI6IHRoaXMuJGluYm94LFxuICAgICAgICB9WyR0eXBlXSk7XG5cbiAgICAgICAgLy9cbiAgICAgICAgY29uc3QgJGJ1ZmZlciA9IG5ldyAodHlwZW9mIFNoYXJlZEFycmF5QnVmZmVyICE9IFwidW5kZWZpbmVkXCIgPyAgU2hhcmVkQXJyYXlCdWZmZXIgOiBBcnJheUJ1ZmZlcikoNDA5Nis4LCB7IG1heEJ5dGVMZW5ndGg6IDY1NTM2KzggfSk7XG4gICAgICAgIGNvbnN0ICR0ZiA9IFtdLCAkaWQgPSB0aGlzLiRuZXdVVUlEKCksICRyZWMgPSBuZXcgUmVzcG9uc2VSZWNlaXZlcigkaWQsICRidWZmZXIpO1xuXG4gICAgICAgIC8vXG4gICAgICAgIHRoaXMuJHJlc3BvbnNlUmVjZWl2ZXJzLnNldCgkaWQsICRyZWMpO1xuICAgICAgICAkY29kZXIuZW5jb2RlTWVzc2FnZShbeyAkaWQsICR0eXBlLCAkc29ja2V0LCAkcGVyc2lzdGVudCwgJGNtZCwgJGFyZ3MgfSwgJGJ1ZmZlciwgZmFsc2VdLCAkdGYpLnRoZW4oKF9hcmdzXykgPT4ge1xuICAgICAgICAgICAgdGhpcy4kc29ja2V0Py5lbWl0Py4oXCJtZXNzYWdlXCIsIF9hcmdzX1swXVswXSk7XG4gICAgICAgIH0pLmNhdGNoKGNvbnNvbGUuZXJyb3IuYmluZChjb25zb2xlKSk7XG5cbiAgICAgICAgLy9cbiAgICAgICAgcmV0dXJuIG5ldyBQcm94eSh3cmFwRnVuYyh7XG4gICAgICAgICAgICBbXCImYnVmZmVyXCJdOiAkYnVmZmVyLFxuICAgICAgICAgICAgW1wiJmRhdGFcIl06ICRyZWNbXCImZGF0YVwiXSxcbiAgICAgICAgICAgIFtcIiZjb2RlXCJdOiB7XG4gICAgICAgICAgICAgICAgW1wiJnR5cGVvZlwiXTogXCJwcm9taXNlXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIHRoaXMuJHByb21pc2VSZWZsZWN0KTtcbiAgICB9XG5cbiAgICAvLyBcbiAgICAkcmVqZWN0KC4uLiRhcmdzKSB7XG4gICAgICAgIC8vY29uc29sZS5lcnJvciguLi4kYXJncyk7XG4gICAgICAgIHRoaXMuJHNvY2tldD8uZW1pdD8uKFwibWVzc2FnZVwiLCAkYXJnc1swXVswXSk7XG4gICAgfVxuXG4gICAgLy8gXG4gICAgJHJlc29sdmUoLi4uJGFyZ3MpIHtcbiAgICAgICAgdGhpcy4kc29ja2V0Py5lbWl0Py4oXCJtZXNzYWdlXCIsICRhcmdzWzBdWzBdKTtcbiAgICB9XG59O1xuXG4vLyBFUzYtbW9kdWxlcyBhbGlrZSAoaW4gdjIuMyBwbGFubmVkIHRvIGNvbXBsZXRlIHF1ZXN0KVxuZXhwb3J0IGNvbnN0IFdyYXBTb2NrZXQgPSAoJFcsICRvcHRpb25zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm94eShuZXcgU29ja2V0SGFuZGxlcigkVywgJG9wdGlvbnMpLCBuZXcgV3JhcEhhbmRsZSh0cnVlKSk7XG59XG5cbi8vIGxlYXJuIHNvY2tldHMgZm9yIFNURFxuU1RELldyYXBTb2NrZXQgPSBXcmFwU29ja2V0O1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBLFk7O0FBRUE7QUFDQSxTQUFTQSxLQUFLO0FBQ2QsT0FBT0MsY0FBYztBQUNyQixPQUFPQyxnQkFBZ0I7QUFDdkIsT0FBT0MsbUJBQW1COztBQUUxQjtBQUNBLE9BQU9DLEdBQUc7QUFDVixPQUFPQyxtQkFBbUI7QUFDMUIsT0FBT0MsV0FBVyxJQUFHQyxVQUFVO0FBQy9CLFNBQVNDLFFBQVE7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBLGVBQWUsTUFBTUMsYUFBYSxTQUFTSCxXQUFXLENBQUM7RUFDbkRJLE9BQU8sR0FBRyxJQUFJOztFQUVkO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNJQyxXQUFXQSxDQUFDRCxPQUFPLEVBQUVFLFFBQVEsR0FBRyxDQUFDLENBQUMsRUFBRTtJQUNoQyxLQUFLLENBQUNGLE9BQU8sRUFBRUUsUUFBUSxDQUFDOztJQUV4QjtJQUNBLElBQUksQ0FBQ0MsT0FBTyxHQUFHLElBQUlSLG1CQUFtQixDQUFDO01BQ25DUyxTQUFTLEVBQUUsSUFBSSxDQUFDQSxTQUFTO01BQ3pCQyxXQUFXLEVBQUUsSUFBSSxDQUFDQSxXQUFXO01BQzdCQyxlQUFlLEVBQUUsSUFBSSxDQUFDQSxlQUFlO01BQ3JDQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUNBLGdCQUFnQjtNQUN2Q0MsZUFBZSxFQUFFLElBQUksQ0FBQ0EsZUFBZTtNQUNyQ0MsT0FBTyxFQUFFUCxRQUFRLENBQUNRLE1BQU07TUFDeEJDLE9BQU8sRUFBRVQsUUFBUSxDQUFDVSxNQUFNO01BQ3hCQyxRQUFRLEVBQUU7SUFDZCxDQUFDLENBQUM7O0lBRUY7SUFDQSxJQUFJLENBQUNDLE1BQU0sR0FBRyxJQUFJbkIsbUJBQW1CLENBQUM7TUFDbENTLFNBQVMsRUFBRSxJQUFJLENBQUNBLFNBQVM7TUFDekJDLFdBQVcsRUFBRSxJQUFJLENBQUNBLFdBQVc7TUFDN0JDLGVBQWUsRUFBRSxJQUFJLENBQUNBLGVBQWU7TUFDckNDLGdCQUFnQixFQUFFLElBQUksQ0FBQ0EsZ0JBQWdCO01BQ3ZDQyxlQUFlLEVBQUUsSUFBSSxDQUFDQSxlQUFlO01BQ3JDQyxPQUFPLEVBQUVQLFFBQVEsQ0FBQ1EsTUFBTTtNQUN4QkMsT0FBTyxFQUFFVCxRQUFRLENBQUNVLE1BQU07TUFDeEJDLFFBQVEsRUFBRTtJQUNkLENBQUMsQ0FBQzs7SUFFRjtJQUNBLElBQUksQ0FBQ0UsZUFBZSxHQUFHLElBQUl4QixjQUFjLENBQUMsSUFBSSxDQUFDeUIsa0JBQWtCLEVBQUUsSUFBSSxDQUFDQyxxQkFBcUIsRUFBRSxJQUFJLENBQUNkLE9BQU8sRUFBRSxJQUFJLENBQUNFLFdBQVcsRUFBRSxJQUFJLENBQUM7SUFDcEksSUFBSSxDQUFDTCxPQUFPLEdBQUdBLE9BQU87O0lBRXRCO0lBQ0EsSUFBSSxDQUFDYyxNQUFNLENBQUNDLGVBQWUsR0FBRyxJQUFJLENBQUNBLGVBQWU7SUFDbEQsSUFBSSxDQUFDWixPQUFPLENBQUNZLGVBQWUsR0FBRyxJQUFJLENBQUNBLGVBQWU7O0lBRW5EO0lBQ0EsSUFBSSxDQUFDVixXQUFXLENBQUNhLGVBQWUsR0FBRyxJQUFJLENBQUNaLGVBQWU7SUFDdkQsSUFBSSxDQUFDRCxXQUFXLENBQUNjLGdCQUFnQixHQUFHLElBQUksQ0FBQ1osZ0JBQWdCOztJQUV6RDtJQUNBLElBQUksQ0FBQ1AsT0FBTyxFQUFFb0IsRUFBRSxHQUFHLFNBQVMsRUFBRSxPQUFPQyxDQUFDLEtBQUs7TUFDdkM7TUFDQSxNQUFNQyxHQUFHLEdBQUcsTUFBTSxJQUFJLENBQUNSLE1BQU0sQ0FBQ1MsYUFBYSxDQUFDLENBQUNGLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQztNQUNwRCxNQUFNRyxHQUFHLEdBQUdGLEdBQUcsQ0FBQyxDQUFDLENBQUM7TUFDbEI7TUFDQSxJQUFJRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUNDLEtBQUssSUFBSSxTQUFTLEVBQUU7UUFDM0IsSUFBSSxDQUFDUixxQkFBcUIsQ0FBQ1MsR0FBRyxDQUFDRixHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUNHLEdBQUcsRUFBRSxJQUFJbEMsbUJBQW1CLENBQUMrQixHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUNHLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQztNQUN6RixDQUFDO01BQ0QsSUFBSSxDQUFDWixlQUFlLENBQUNhLGFBQWEsQ0FBQyxHQUFHTixHQUFHLENBQUM7SUFDOUMsQ0FBQyxDQUFDO0VBQ047O0VBRUE7RUFDQSxLQUFLLE9BQU8sQ0FBQU8sQ0FBQSxFQUFJO0lBQ1osT0FBTztNQUNILFNBQVMsRUFBRTtJQUNmLENBQUM7RUFDTDs7RUFFQTtFQUNBLElBQUlDLE1BQU1BLENBQUEsRUFBRztJQUNULE9BQU8sSUFBSSxDQUFDOUIsT0FBTztFQUN2Qjs7RUFFQTtFQUNBK0IsUUFBUUEsQ0FBQyxFQUFDTixLQUFLLEdBQUcsU0FBUyxFQUFHekIsT0FBTyxHQUFHLElBQUksRUFBRWdDLElBQUksRUFBRUMsS0FBSyxFQUFFQyxXQUFXLEVBQUMsRUFBRTtJQUNyRSxNQUFNQyxNQUFNLEdBQUk7TUFDWixTQUFTLEVBQUUsSUFBSSxDQUFDaEMsT0FBTztNQUN2QixTQUFTLEVBQUUsSUFBSSxDQUFDQSxPQUFPO01BQ3ZCLFVBQVUsRUFBRSxJQUFJLENBQUNXO0lBQ3JCLENBQUMsQ0FBQ1csS0FBSyxDQUFFOztJQUVUO0lBQ0EsTUFBTVcsT0FBTyxHQUFHLEtBQUssT0FBT0MsaUJBQWlCLElBQUksV0FBVyxHQUFJQSxpQkFBaUIsR0FBR0MsV0FBVyxFQUFFLElBQUksR0FBQyxDQUFDLEVBQUUsRUFBRUMsYUFBYSxFQUFFLEtBQUssR0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3BJLE1BQU1DLEdBQUcsR0FBRyxFQUFFLENBQUViLEdBQUcsR0FBRyxJQUFJLENBQUNjLFFBQVEsQ0FBQyxDQUFDLENBQUVDLElBQUksR0FBRyxJQUFJbEQsZ0JBQWdCLENBQUNtQyxHQUFHLEVBQUVTLE9BQU8sQ0FBQzs7SUFFaEY7SUFDQSxJQUFJLENBQUNwQixrQkFBa0IsQ0FBQ1UsR0FBRyxDQUFDQyxHQUFHLEVBQUVlLElBQUksQ0FBQztJQUN0Q1AsTUFBTSxDQUFDUSxhQUFhLENBQUMsQ0FBQyxFQUFFaEIsR0FBRyxFQUFFRixLQUFLLEVBQUV6QixPQUFPLEVBQUVrQyxXQUFXLEVBQUVGLElBQUksRUFBRUMsS0FBSyxDQUFDLENBQUMsRUFBRUcsT0FBTyxFQUFFLEtBQUssQ0FBQyxFQUFFSSxHQUFHLENBQUMsQ0FBQ0ksSUFBSSxDQUFDLENBQUNDLE1BQU0sS0FBSztNQUM1RyxJQUFJLENBQUM3QyxPQUFPLEVBQUU4QyxJQUFJLEdBQUcsU0FBUyxFQUFFRCxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDakQsQ0FBQyxDQUFDLENBQUNFLEtBQUssQ0FBQ0MsT0FBTyxDQUFDQyxLQUFLLENBQUNDLElBQUksQ0FBQ0YsT0FBTyxDQUFDLENBQUM7O0lBRXJDO0lBQ0EsT0FBTyxJQUFJRyxLQUFLLENBQUNyRCxRQUFRLENBQUM7TUFDdEIsQ0FBQyxTQUFTLEdBQUdzQyxPQUFPO01BQ3BCLENBQUMsT0FBTyxHQUFHTSxJQUFJLENBQUMsT0FBTyxDQUFDO01BQ3hCLENBQUMsT0FBTyxHQUFHO1FBQ1AsQ0FBQyxTQUFTLEdBQUc7TUFDakI7SUFDSixDQUFDLENBQUMsRUFBRSxJQUFJLENBQUNsQyxlQUFlLENBQUM7RUFDN0I7O0VBRUE7RUFDQTRDLE9BQU9BLENBQUMsR0FBR25CLEtBQUssRUFBRTtJQUNkO0lBQ0EsSUFBSSxDQUFDakMsT0FBTyxFQUFFOEMsSUFBSSxHQUFHLFNBQVMsRUFBRWIsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ2hEOztFQUVBO0VBQ0FvQixRQUFRQSxDQUFDLEdBQUdwQixLQUFLLEVBQUU7SUFDZixJQUFJLENBQUNqQyxPQUFPLEVBQUU4QyxJQUFJLEdBQUcsU0FBUyxFQUFFYixLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDaEQ7QUFDSixDQUFDOztBQUVEO0FBQ0EsT0FBTyxNQUFNcUIsVUFBVSxHQUFHQSxDQUFDQyxFQUFFLEVBQUVyRCxRQUFRLEtBQUs7RUFDeEMsT0FBTyxJQUFJaUQsS0FBSyxDQUFDLElBQUlwRCxhQUFhLENBQUN3RCxFQUFFLEVBQUVyRCxRQUFRLENBQUMsRUFBRSxJQUFJTCxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDM0UsQ0FBQzs7QUFFRDtBQUNBSCxHQUFHLENBQUM0RCxVQUFVLEdBQUdBLFVBQVUifQ==
